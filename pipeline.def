Bootstrap: docker
From: continuumio/miniconda3

%post
    rm -rf pipelinex
    mkdir ./pipelinex
    apt update
    apt-get install curl -y
    apt-get install wget -y
    /opt/conda/bin/conda update -n base -c defaults conda
    /opt/conda/bin/conda init bash
    /opt/conda/bin/conda info | grep -i 'base environment'
    /opt/conda/bin/conda create --name nanosim python=3.7 --yes
    /opt/conda/bin/conda activate nanosim && conda install --file fixed_requirements.txt -c conda-forge -c bioconda --yes
    cd .. && /opt/conda/bin/conda activate base
    

    


%files
    fixed_requirements.txt requirements.txt


%startscript
    ls -la

%runscript
    ls -la  